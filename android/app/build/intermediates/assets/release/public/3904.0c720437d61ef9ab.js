"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[3904],{3904:(k,d,l)=>{l.r(d),l.d(d,{HomePage:()=>y});var c=l(5861),u=l(6895),a=l(433),n=l(6114),g=l(9993),e=l(8256),p=l(2e3),f=l(7556);function _(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"ion-item")(1,"ion-label"),e._uU(2),e.qZA(),e.TgZ(3,"ion-button",4),e.NdJ("click",function(){const m=e.CHM(t).$implicit,b=e.oxw();return e.KtG(b.joinStore(m))}),e._uU(4),e.qZA()()}if(2&i){const t=s.$implicit;e.xp6(2),e.Oqu(t.name),e.xp6(2),e.Oqu(t.isJoined?"Quitar":"Unirse")}}let Z=(()=>{class i{constructor(t,o,r){this.modalCtrl=t,this.storeService=o,this.authService=r}ngOnInit(){var t=this;return(0,c.Z)(function*(){t.stores=yield t.storeService.getStoresJoined()})()}cancel(){return this.modalCtrl.dismiss()}joinStore(t){return this.modalCtrl.dismiss(t)}isJoined(t){var o=this;return(0,c.Z)(function*(){const r=yield o.authService.getToken();console.log(r.user)})()}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(n.IN),e.Y36(p.d),e.Y36(f.e))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-join"]],standalone:!0,features:[e.jDz],decls:9,vars:1,consts:[["slot","start"],["color","medium",3,"click"],[1,"ion-padding"],[4,"ngFor","ngForOf"],[3,"click"]],template:function(t,o){1&t&&(e.TgZ(0,"ion-header")(1,"ion-toolbar")(2,"ion-buttons",0)(3,"ion-button",1),e.NdJ("click",function(){return o.cancel()}),e._uU(4,"Cerrar"),e.qZA()(),e.TgZ(5,"ion-title"),e._uU(6,"Unete a una tienda"),e.qZA()()(),e.TgZ(7,"ion-content",2),e.YNc(8,_,5,2,"ion-item",3),e.qZA()),2&t&&(e.xp6(8),e.Q6J("ngForOf",o.stores))},dependencies:[n.Pc,n.YG,n.Sm,n.W2,n.Gu,n.Ie,n.Q$,n.wd,n.sr,u.ez,u.sg]}),i})();var h=l(6388);function C(i,s){if(1&i&&e._UZ(0,"ion-img",8),2&i){const t=e.oxw();let o;e.Q6J("src",null==(o=t.storeForm.get("img"))?null:o.value)}}let v=(()=>{class i{constructor(t,o,r){this.modalCtrl=t,this.formBuilder=o,this.authService=r,this.storeForm=this.formBuilder.group({name:"",img:"",users:[]})}ngOnInit(){var t=this;return(0,c.Z)(function*(){t.storeForm=t.formBuilder.group({name:["",a.kI.required],img:["",a.kI.required],users:[(yield t.authService.getToken()).user.id,a.kI.required]})})()}cancel(){this.modalCtrl.dismiss()}confirm(){this.modalCtrl.dismiss(this.storeForm.value)}uploadPhoto(){var t=this;return(0,c.Z)(function*(){const o=yield h.V1.getPhoto({resultType:h.dk.Base64,quality:100});console.log(o),t.storeForm.patchValue({img:`data:image/${o.format};base64,${o.base64String}`})})()}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(n.IN),e.Y36(a.qu),e.Y36(f.e))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-create"]],standalone:!0,features:[e.jDz],decls:15,vars:4,consts:[["slot","start"],["color","medium",3,"click"],["slot","end"],[3,"disabled","strong","click"],[1,"ion-padding",3,"formGroup"],["formControlName","name","mode","md","label","Nombre","labelPlacement","floating","clearInput","true","fill","outline","placeholder","Nombre de la tienda","color","primary","shape","round"],[3,"click"],[3,"src",4,"ngIf"],[3,"src"]],template:function(t,o){if(1&t&&(e.TgZ(0,"ion-header")(1,"ion-toolbar")(2,"ion-buttons",0)(3,"ion-button",1),e.NdJ("click",function(){return o.cancel()}),e._uU(4,"Cerrar"),e.qZA()(),e.TgZ(5,"ion-title"),e._uU(6,"Crear una tienda"),e.qZA(),e.TgZ(7,"ion-buttons",2)(8,"ion-button",3),e.NdJ("click",function(){return o.confirm()}),e._uU(9,"Confirmar"),e.qZA()()()(),e.TgZ(10,"ion-content",4),e._UZ(11,"ion-input",5),e.TgZ(12,"ion-button",6),e.NdJ("click",function(){return o.uploadPhoto()}),e._uU(13,"Subir foto"),e.qZA(),e.YNc(14,C,1,1,"ion-img",7),e.qZA()),2&t){let r;e.xp6(8),e.Q6J("disabled",o.storeForm.invalid)("strong",!0),e.xp6(2),e.Q6J("formGroup",o.storeForm),e.xp6(4),e.Q6J("ngIf",null==o.storeForm||null==(r=o.storeForm.get("img"))?null:r.value)}},dependencies:[n.Pc,n.YG,n.Sm,n.W2,n.Gu,n.Xz,n.pK,n.wd,n.sr,n.j9,u.ez,u.O5,a.UX,a.JJ,a.JL,a.sg,a.u]}),i})();var S=l(849);const T=function(i){return["/tabs",i,"sales"]};function J(i,s){if(1&i&&(e.TgZ(0,"ion-item")(1,"div",6)(2,"ion-label"),e._uU(3),e.qZA(),e.TgZ(4,"ion-avatar"),e._UZ(5,"ion-img",7),e.qZA()()()),2&i){const t=s.$implicit;e.xp6(1),e.Q6J("routerLink",e.VKq(3,T,t.id)),e.xp6(2),e.hij(" ",t.name," "),e.xp6(2),e.Q6J("src",t.img)}}let y=(()=>{class i{constructor(t,o,r,m){this.storeService=t,this.modalController=o,this.storage=r,this.navController=m}ngOnInit(){this.loadPage()}loadPage(){var t=this;return(0,c.Z)(function*(){t.stores=yield t.storeService.getStoresByMe()})()}createStore(){var t=this;return(0,c.Z)(function*(){const o=yield t.modalController.create({component:v});yield o.present();const r=(yield o.onDidDismiss()).data;r&&(yield t.storeService.createStore(r),yield t.loadPage())})()}joinStore(){var t=this;return(0,c.Z)(function*(){const o=yield t.modalController.create({component:Z});yield o.present();const r=(yield o.onDidDismiss()).data;r&&(r.isJoined?yield t.storeService.separateJoin(r.id):yield t.storeService.joinStore(r.id),t.stores=yield t.storeService.getStoresByMe())})()}logout(){var t=this;return(0,c.Z)(function*(){yield t.storage.clear(),t.navController.navigateRoot(["/login"])})()}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(p.d),e.Y36(n.IN),e.Y36(S.K),e.Y36(n.SH))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-home"]],standalone:!0,features:[e.jDz],decls:15,vars:3,consts:[[3,"translucent"],["src","./../../../assets/icon/scrumstock-icon.png","slot","end",1,"h-12","mr-5",3,"click"],[3,"fullscreen"],[4,"ngFor","ngForOf"],[1,"flex","justify-between"],["shape","round","expand","block",1,"w-full",3,"click"],[3,"routerLink"],[3,"src"]],template:function(t,o){1&t&&(e.TgZ(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-title"),e._uU(3,"Inicio"),e.qZA(),e.TgZ(4,"ion-img",1),e.NdJ("click",function(){return o.logout()}),e.qZA()()(),e.TgZ(5,"ion-content",2)(6,"ion-title"),e._uU(7,"Tiendas asociadas"),e.qZA(),e.TgZ(8,"ion-list"),e.YNc(9,J,6,5,"ion-item",3),e.qZA()(),e.TgZ(10,"ion-footer",4)(11,"ion-button",5),e.NdJ("click",function(){return o.createStore()}),e._uU(12,"Crear"),e.qZA(),e.TgZ(13,"ion-button",5),e.NdJ("click",function(){return o.joinStore()}),e._uU(14,"Unirse"),e.qZA()()),2&t&&(e.Q6J("translucent",!0),e.xp6(5),e.Q6J("fullscreen",!0),e.xp6(4),e.Q6J("ngForOf",o.stores))},dependencies:[n.Pc,n.BJ,n.YG,n.W2,n.fr,n.Gu,n.Xz,n.Ie,n.Q$,n.q_,n.wd,n.sr,n.YI,u.ez,u.sg,a.u5,g.Bz,g.rH]}),i})()}}]);