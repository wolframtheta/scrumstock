"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[7369],{7369:(O,m,a)=>{a.r(m),a.d(m,{DetailPage:()=>I});var u=a(5861),d=a(6895),g=a(433),_=a(6114),i=a(8256),p=a(849),f=a(2953),v=a(8270),h=a(9993),x=a(1957);function T(o,s){if(1&o){const t=i.EpF();i.TgZ(0,"ion-button",10),i.NdJ("click",function(){i.CHM(t);const n=i.oxw();return i.KtG(n.uploadPhoto())}),i._uU(1,"Cambiar foto"),i.qZA()}}function P(o,s){if(1&o&&(i.TgZ(0,"ion-col",14)(1,"ion-label",7),i._uU(2),i.qZA()()),2&o){const t=s.$implicit;i.xp6(2),i.Oqu(t.title)}}function Z(o,s){if(1&o){const t=i.EpF();i.TgZ(0,"ion-button",20),i.NdJ("click",function(){i.CHM(t);const n=i.oxw().$implicit,l=i.oxw(2);return i.KtG(l.remove(n))}),i._UZ(1,"ion-icon",21),i.qZA()}if(2&o){const t=i.oxw().$implicit;i.Q6J("disabled",t.quantity<=0)}}function b(o,s){if(1&o){const t=i.EpF();i.TgZ(0,"ion-button",10),i.NdJ("click",function(){i.CHM(t);const n=i.oxw().$implicit,l=i.oxw(2);return i.KtG(l.add(n))}),i._UZ(1,"ion-icon",22),i.qZA()}}function D(o,s){if(1&o){const t=i.EpF();i.TgZ(0,"ion-row")(1,"ion-col",15)(2,"ion-input",16),i.NdJ("ionChange",function(n){const r=i.CHM(t).$implicit,c=i.oxw(2);return i.KtG(c.changeNameItem(n,r))}),i.qZA()(),i.TgZ(3,"ion-col",17),i.YNc(4,Z,2,1,"ion-button",18),i.TgZ(5,"ion-label",19),i._uU(6),i.qZA(),i.YNc(7,b,2,0,"ion-button",5),i.qZA()()}if(2&o){const t=s.$implicit,e=i.oxw(2);i.xp6(2),i.Q6J("disabled",!e.editMode)("value",t.name),i.xp6(2),i.Q6J("ngIf",e.editMode),i.xp6(2),i.Oqu(t.quantity),i.xp6(1),i.Q6J("ngIf",e.editMode)}}function E(o,s){if(1&o){const t=i.EpF();i.TgZ(0,"ion-button",10),i.NdJ("click",function(){i.CHM(t);const n=i.oxw(2);return i.KtG(n.addNewSize(n.item))}),i._UZ(1,"ion-icon",22),i.qZA()}}function M(o,s){if(1&o&&(i.TgZ(0,"ion-grid",11)(1,"ion-row"),i.YNc(2,P,3,1,"ion-col",12),i.qZA(),i.YNc(3,D,8,5,"ion-row",13),i.TgZ(4,"ion-row"),i.YNc(5,E,2,0,"ion-button",5),i.qZA()()),2&o){const t=i.oxw();i.xp6(2),i.Q6J("ngForOf",t.columns),i.xp6(1),i.Q6J("ngForOf",null==t.item?null:t.item.sizes),i.xp6(2),i.Q6J("ngIf",t.editMode)}}function A(o,s){if(1&o&&(i.TgZ(0,"div",6)(1,"ion-label",7),i._uU(2,"Cantidad: "),i.qZA(),i.TgZ(3,"ion-label"),i._uU(4),i.qZA()()),2&o){const t=i.oxw();i.xp6(4),i.Oqu(null==t.item?null:t.item.quantity)}}let I=(()=>{class o{constructor(t,e,n,l,r){var c;this.storage=t,this.itemService=e,this.utilsService=n,this.router=l,this.photoService=r,this.columns=[{id:"size",title:"Talla"},{id:"quantity",title:"Cantidad"}],this.editMode=!1,this.item=null===(c=window.history.state)||void 0===c?void 0:c.item}ngOnInit(){var t=this;return(0,u.Z)(function*(){t.editMode=yield t.storage.get("editMode")})()}add(t){var e,n;null===(e=this.item)||void 0===e||null===(n=e.sizes)||void 0===n||n.map(l=>(l.id===t.id&&++l.quantity,l)),++this.item.quantity,this.itemService.modifyItem(this.item)}remove(t){var e,n;null===(e=this.item)||void 0===e||null===(n=e.sizes)||void 0===n||n.map(l=>(l.id===t.id&&--l.quantity,l)),--this.item.quantity,this.itemService.modifyItem(this.item)}changeNameItem(t,e){e.name=t.detail.value,this.itemService.modifyItem(this.item)}addNewSize(t){var e=this;return(0,u.Z)(function*(){var n;let l=yield e.utilsService.getIdApp();const r={id:++l,idFather:t.id,name:"",quantity:0};null===(n=e.item.sizes)||void 0===n||n.push(r),e.itemService.modifyItem(e.item),yield e.utilsService.setIdApp(l)})()}uploadPhoto(){var t=this;return(0,u.Z)(function*(){const e=yield t.photoService.takePhoto();if(e.base64String){const n=yield t.photoService.compressBase64(e.base64String,1,500,500);n&&(t.item.img=n+"",t.itemService.modifyItem(t.item))}})()}}return o.\u0275fac=function(t){return new(t||o)(i.Y36(p.K),i.Y36(f.e),i.Y36(v.F),i.Y36(h.F0),i.Y36(x.T))},o.\u0275cmp=i.Xpm({type:o,selectors:[["app-detail"]],standalone:!0,features:[i.jDz],decls:20,vars:8,consts:[[3,"translucent"],["slot","start"],[3,"fullscreen"],[1,"flex","flex-col","gap-3"],[3,"src"],[3,"click",4,"ngIf"],[1,"text-xl"],[1,"font-bold"],["class","text-center",4,"ngIf"],["class","text-xl",4,"ngIf"],[3,"click"],[1,"text-center"],["class","border-2 bg-gray-300 text-black",4,"ngFor","ngForOf"],[4,"ngFor","ngForOf"],[1,"border-2","bg-gray-300","text-black"],[1,"border-2","flex","place-items-center","justify-center"],[1,"text-lg",3,"disabled","value","ionChange"],[1,"border-2","flex","flex-row","items-center","justify-center","gap-2"],[3,"disabled","click",4,"ngIf"],[1,"text-lg"],[3,"disabled","click"],["name","remove"],["name","add"]],template:function(t,e){1&t&&(i.TgZ(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-buttons",1),i._UZ(3,"ion-back-button"),i.qZA(),i.TgZ(4,"ion-title"),i._uU(5),i.qZA()()(),i.TgZ(6,"ion-content",2)(7,"ion-card")(8,"ion-card-content",3),i._UZ(9,"img",4),i.YNc(10,T,2,0,"ion-button",5),i.TgZ(11,"div",3)(12,"div",6)(13,"ion-label",7),i._uU(14,"Precio: "),i.qZA(),i.TgZ(15,"ion-label"),i._uU(16),i.qZA()(),i.TgZ(17,"div"),i.YNc(18,M,6,3,"ion-grid",8),i.YNc(19,A,5,1,"div",9),i.qZA()()()()()),2&t&&(i.Q6J("translucent",!0),i.xp6(5),i.Oqu(null==e.item?null:e.item.name),i.xp6(1),i.Q6J("fullscreen",!0),i.xp6(3),i.Q6J("src",null==e.item?null:e.item.img,i.LSH),i.xp6(1),i.Q6J("ngIf",e.router.url.includes("inventory")&&e.editMode),i.xp6(6),i.hij("",null==e.item?null:e.item.price,"\u20ac"),i.xp6(2),i.Q6J("ngIf",null==e.item?null:e.item.sizes),i.xp6(1),i.Q6J("ngIf",!(null!=e.item&&e.item.sizes)))},dependencies:[_.Pc,_.oU,_.YG,_.Sm,_.PM,_.FN,_.wI,_.W2,_.jY,_.Gu,_.gu,_.pK,_.Q$,_.Nd,_.wd,_.sr,_.j9,_.cs,d.ez,d.sg,d.O5,g.u5]}),o})()}}]);