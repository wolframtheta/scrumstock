"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[3058],{3058:(h,_,i)=>{i.r(_),i.d(_,{LoginPage:()=>E});var c=i(5861),m=i(6895),t=i(433),e=i(6114),d=i(2340),n=i(8256),p=i(7556),v=i(849);function f(s,g){1&s&&n._UZ(0,"ion-spinner",13)}let E=(()=>{class s{constructor(o,r,a,u){this.formBuilder=o,this.authService=r,this.storage=a,this.navController=u,this.loginForm=this.formBuilder.group({username:[d.N.production?"":"xaviermarques4f@gmail.com",t.kI.required],password:[d.N.production?"":"Aobcd8663",t.kI.required]}),this.isLoading=!1}ngOnInit(){}login(){var o=this;return(0,c.Z)(function*(){var r,a;o.isLoading=!0;const u={identifier:null===(r=o.loginForm.get("username"))||void 0===r?void 0:r.value,password:null===(a=o.loginForm.get("password"))||void 0===a?void 0:a.value};try{const l=yield o.authService.login(u);console.log(l),yield o.storage.set("token",l);const P=yield o.authService.getMe();l.user=P,yield o.storage.set("token",l),o.navController.navigateForward("/home")}catch{o.isLoading=!1}o.isLoading=!1})()}}return s.\u0275fac=function(o){return new(o||s)(n.Y36(t.qu),n.Y36(p.e),n.Y36(v.K),n.Y36(e.SH))},s.\u0275cmp=n.Xpm({type:s,selectors:[["app-login"]],standalone:!0,features:[n.jDz],decls:18,vars:3,consts:[[1,"ion-padding"],[1,"login-container"],[1,"ion-justify-content-center"],[2,"text-align","center"],["src","../../../assets/icon/ScrumStock.svg",1,""],[3,"formGroup","ngSubmit"],["lines","none",1,"item"],["position","stacked"],["type","text","formControlName","username"],["type","password","formControlName","password"],[1,"center"],["type","submit","shape","round",1,"btn-grad",3,"disabled"],["name","circular",4,"ngIf"],["name","circular"]],template:function(o,r){1&o&&(n.TgZ(0,"ion-content",0)(1,"ion-grid",1)(2,"ion-row",2)(3,"ion-col",3),n._UZ(4,"img",4),n.TgZ(5,"form",5),n.NdJ("ngSubmit",function(){return r.login()}),n.TgZ(6,"ion-item",6)(7,"ion-label",7),n._uU(8,"Usuario"),n.qZA(),n._UZ(9,"ion-input",8),n.qZA(),n.TgZ(10,"ion-item",6)(11,"ion-label",7),n._uU(12,"Contrase\xf1a"),n.qZA(),n._UZ(13,"ion-input",9),n.qZA(),n.TgZ(14,"div",10)(15,"ion-button",11),n._uU(16," Entrar "),n.YNc(17,f,1,0,"ion-spinner",12),n.qZA()()()()()()()),2&o&&(n.xp6(5),n.Q6J("formGroup",r.loginForm),n.xp6(10),n.Q6J("disabled",!r.loginForm.valid),n.xp6(2),n.Q6J("ngIf",r.isLoading))},dependencies:[e.Pc,e.YG,e.wI,e.W2,e.jY,e.pK,e.Ie,e.Q$,e.Nd,e.PQ,e.j9,m.ez,m.O5,t.u5,t._Y,t.JJ,t.JL,t.UX,t.sg,t.u]}),s})()}}]);